<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>AIMobileLib</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="HeaderDoc">
<meta name="xcode-display" content="render">
<style><!--
.toc_contents_text {
    padding-left: 1em;
    text-indent: -1em;
}

ul.tocSubEntryList li.tocSubEntry {
    list-style: none;
}

#colorbox {
		display: none;
}
.spec_sheet_line {
		margin-bottom: 1px;
}
.collapsible {
		display: none;
}
.toc_leadspace {
		width: 10; min-width: 10;
}
.disclosure_triangle_td {
		width: 14; min-width: 14;
		font-size: 10px;
		vertical-align: middle;
}
.specbox td {
		font-size: 13px;
}
.specbox td a {
		font-size: 13px;
}
.specbox td code {
		font-size: 13px;
}
.specbox td tt {
		font-size: 13px;
}
.specbox td pre {
		font-size: 13px;
}
.specbox a {
		font-size: 12px;
}
.disclosure_triangle_td a:hover {
		text-decoration: none;
}
.disclosure_triangle_td a:hover {
		text-decoration: none;
}
.hd_toc_box {
		padding-top: 10px;
		padding-right: 15px;
}.tocSeparator {
		margin-top: 15px;
		padding-bottom: 0px;
		margin-bottom: 0px;
}
.tocSubEntryList {
		margin-left: 0px;
		padding-left: 40px;
		padding-top: 0px;
		margin-top: 2px;
		padding-bottom: 0px;
		margin-bottom: 8px;
}
.hd_toc_heading_table {
		margin-top: 2px;
		margin-bottom: 2px;
}
.hd_toc_entry_table {
		margin-top: 2px;
		margin-bottom: 2px;
}
.tocSubEntry {
		margin-left: 0px;
		padding-left: 0px;
		margin-top: 0px;
		margin-bottom: 1px;
}
.tocSubEntry a {
		font-size: 10pt;
}
.tocSubheading {
		padding-left: 14px;
		margin-left: 0px;
		margin-top: 5px;
		padding-top: 0px;
		font-size: 16px;
		color: #808080;
}

#tocMenu {
		border-right: 1px solid #c0c0c0;
		background-color: #f4f4ff;
		top:0px;
		left:0px;
		width:230px;
		height:100%;
}
#bodyContents {
		width: auto;
		padding-left: 15px;
}
--></style>
<script language="JavaScript" type="text/javascript"><!--
function getNewHTTPObject()
{
        var xmlhttp;

        /** Special IE only code ... */
        /*@cc_on
          @if (@_jscript_version >= 5)
              try
              {
                  xmlhttp = new ActiveXObject('Msxml2.XMLHTTP');
              }
              catch (e)
              {
                  try
                  {
                      xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
                  }
                  catch (E)
                  {
                      xmlhttp = false;
                  }
             }
          @else
             xmlhttp = false;
        @end @*/

        /** Every other browser on the planet */
        if (!xmlhttp && typeof XMLHttpRequest != 'undefined')
        {
            try
            {
                xmlhttp = new XMLHttpRequest();
            }
            catch (e)
            {
                xmlhttp = false;
            }
        }

        return xmlhttp;
}

function hidetoc() {
	var toc = document.getElementById('tocMenu');
	var src = toc.getAttribute('src');
	var xhr = getNewHTTPObject();
	xhr.open('GET', src, true);
	xhr.onreadystatechange = function() {
		if(xhr.readyState == 4) {
			var toc = document.getElementById('tocMenu');
			toc.innerHTML = xhr.responseText;
		}
	}
	xhr.send(null);
	var origURL = parent.document.URL;
	var contentURL = origURL.substring(origURL.indexOf('?')+1, origURL.length);
	if (contentURL.length == origURL.length) {
		jumpPos = origURL.substring(origURL.indexOf('#')+1, origURL.length);
	}
	if (contentURL == "hidetoc") {
		var body = document.getElementById('bodyContents');
		if (toc && body) {
			toc.style.display = 'none';
			body.style.marginLeft = '0px';
		}
	}
}

function disclosure_triangle(elt) {
   var linkelt = elt;
   while (elt && elt.tagName != 'TABLE') { elt = elt.parentNode;}
   if (!elt) { return; }
   while (elt && elt.tagName != 'DIV') { elt = elt.nextSibling;}
   if (!elt) { return; }
   if (parseInt(linkelt.getAttribute('state'))) {
      // It's open.  Close it
      linkelt.innerHTML = '&#x25B7;';
      linkelt.setAttribute('state', 0);
      linkelt.setAttribute('class', 'closed_disclosure_triangle');
      elt.style.display = 'none';
   } else {
      // It's closed.  Open it
      linkelt.innerHTML = '&#x25BC;';
      linkelt.setAttribute('state', 1);
      linkelt.setAttribute('class', 'open_disclosure_triangle');
      elt.style.display = 'block';
   }
}
--></script><style type="text/css"><!--.char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;}div {font-size: 10pt; text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #000000;}td {font-size: 10pt; text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #000000;}span.hd_tocAccessSpace { display: block; font-size: 1px; height: 3px; min-height: 3px; }span.hd_tocGroupSpace { display: block; font-size: 1px; height: 3px; min-height: 3px; }span.hd_tocGroup { display: block; font-weight: bold; font-size: 10pt; text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #000000; margin-left: 0px; padding-left: 40px; }span.hd_tocGroup + span.hd_tocAccess { padding-top: 5px; }td.toc_contents_text {font-size: 11pt; text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #000000; }li.tocSubEntry {font-size: 11pt; text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #000000;}p {font-size: 10pt; text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #000000;}a:link {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #36c;}a:visited {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #36c;}a:visited:hover {text-decoration: underline; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #36c;}a:active {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #36c;}a:hover {text-decoration: underline; font-family: lucida grande, geneva, helvetica, arial, sans-serif; color: #36c;}h2.h2tight { margin-top: 0px; padding-top: 0px; }h1 { margin-top: 13px; padding-top: 0px; }h4 {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: tiny; font-weight: bold;}h5 {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: 10.1pt; font-weight: bold;}pre {text-decoration: none; font-family: Courier, Consolas, monospace; color: #666; font-size: 10pt;}pre a { font-family: Courier, Consolas, monospace; color: #666;font-size: 10pt;}pre a:link { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}pre a:visited { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}pre a:visited:hover { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}pre a:active { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}pre a:hover { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}code {text-decoration: none; font-family: Courier, Consolas, monospace; color: #666;font-size: 10pt;}code a { font-family: Courier, Consolas, monospace; color: #666;font-size: 10pt;}code a:link { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}code a:visited { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}code a:visited:hover { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}code a:active { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}code a:hover { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}tt {text-decoration: none; font-family: Courier, Consolas, monospace; color: #666;font-size: 10pt;}tt a { font-family: Courier, Consolas, monospace; color: #666;font-size: 10pt;}tt a:link { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}tt a:visited { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}tt a:visited:hover { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}tt a:active { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}tt a:hover { font-family: Courier, Consolas, monospace; color: #36c;font-size: 10pt;}body  {text-decoration: none; font-family: Courier, Consolas, monospace; color: #666;font-size: 10pt; padding-left: 0px; padding-top: 0px; margin-left: 0px; margin-top: 0px; border: none; }#hd_outermost_table { margin-left: 0px; border-spacing: 0px; margin-top: 0px; padding-left: 0px; padding-top: 0px; border: none; }#hd_outermost_table > tr { border-spacing: 0px; margin-left: 0px; margin-top: 0px; padding-left: 0px; padding-top: 0px; border: none; }#hd_outermost_table > tr > td { border-spacing: 0px; margin-left: 0px; margin-top: 0px; }#hd_outermost_table > tbody > tr { border-spacing: 0px; margin-left: 0px; margin-top: 0px; padding-left: 0px; padding-top: 0px; border: none; }#hd_outermost_table > tbody > tr > td { border-spacing: 0px; margin-left: 0px; margin-top: 0px; padding-top: 3px; }.afterName { display: none; }.list_indent { margin-left: 40px; }.declaration_indent { margin-left: 40px; margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px; min-height: 12px; vertical-align: middle; }.declaration_indent pre { margin-top: 20px; padding-top: 0px; margin-bottom: 20px; padding-bottom: 0px; }.gapBeforeFooter { display: none; }hr { height: 0px; min-height: 0px; border-top: none; border-left: none; border-right: none; border-bottom: 1px solid #909090;}hr.afterHeader { display: none }.param_group_indent { margin-left: 25px; }.param_indent { margin-left: 40px; margin-top: 0px; padding-top: 0px; }.param_indent dl { margin-top: 4px; padding-top: 0px; }dl dd > p:first-child { margin-top: 2px; padding-top: 0px; }.param_indent dl dd > p:first-child { margin-top: 2px; padding-top: 0px; }.group_indent { margin-left: 40px; }.group_desc_indent { margin-left: 20px; }.warning_indent { margin-left: 40px; }.important_indent { margin-left: 40px; }.note_indent { margin-left: 40px; }h3 {       color: #3C4C6C;}.tight {       margin-top: 2px; margin-bottom: 0px;       padding-top: 0px; padding-bottom: 0px;}h3 a {       color: #3C4C6C;	font-size: 16px;	font-style: normal;	font-variant: normal;	font-weight: bold;	height: 0px;	line-height: normal;}.hd_tocAccess { display: block; margin-left: 40px; font-style: italic; font-size: 10px; font-weight: normal; color: #303030; }.tocSubheading { margin-bottom: 4px; }--></style>
</head>
<body bgcolor="#ffffff" onload="hidetoc();">
<!-- headerDoc=cl; uid=//apple_ref/occ/cl/AIMobileLib;  name=AIMobileLib-->
<a name="//apple_ref/occ/cl/AIMobileLib"></a><table id="hd_outermost_table" height="100%" width="100%"><tr>
<td valign="top" id="tocMenu" src="toc.html"></td>
<td id="bodyContents" valign="top">
<a name="top"></a>
<h1><a name="AIMobileLib">AIMobileLib</a></h1>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Superclass:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<!-- a logicalPath="//apple_ref/occ/cl/NSObject" machineGenerated="true" -->NSObject<!-- /a -->
</div></div></td>
</tr>
<tr>
<td scope="row"><b>Version:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">1.0</div></div></td>
</tr>
<tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a logicalpath="//apple_ref/doc/header/AIMobileLib.h" target="_top" machinegenerated="true" href="../../index.html#//apple_ref/doc/header/AIMobileLib.h">AIMobileLib.h</a></div></div></td>
</tr>
</table></div>
<h2>Introduction</h2>
<!-- begin discussion --><!-- headerDoc=discussion;uid=//apple_ref/occ/cl/AIMobileLib;name=start --><p>AIMobileLib is a static class that contains Login with Amazon APIs. This class provides APIs for getting authorization from users, getting profile information, clearing authorization state, and getting authorization tokens to access secure data.
</p>
<!-- headerDoc=discussion;uid=//apple_ref/occ/cl/AIMobileLib;name=end --><!-- end discussion -->
<hr class="afterClassOrHeaderInfo">
<br><a name="HeaderDoc_methods"></a>
<h2 class="h2tight">Methods</h2>
<dl>
<dt><tt><a href="index.html#//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" target="_top">+authorizeUserForScopes:delegate:</a></tt></dt>
<dd>
<p>Allows the user to login and, if necessary, authorize the application for the requested scopes.
</p>
</dd>
<dt><tt><a href="index.html#//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" target="_top">+clearAuthorizationState:</a></tt></dt>
<dd>
<p>Deletes cached user tokens and other data.  Use this method to logout a user.
</p>
</dd>
<dt><tt><a href="index.html#//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:" target="_top">+getAccessTokenForScopes:withOverrideParams:delegate:</a></tt></dt>
<dd>
<p>Once the user has logged in, this method will return a valid access token for the requested scopes.
</p>
</dd>
<dt><tt><a href="index.html#//apple_ref/occ/clm/AIMobileLib/getProfile:" target="_top">+getProfile:</a></tt></dt>
<dd><p>Use this method to get the profile of the current authorized user.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:" target="_top">+handleOpenURL:sourceApplication:</a></tt></dt>
<dd>
<p>Helper function for <a href="index.html#//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" logicalPath="//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" target="_top">authorizeUserForScopes:delegate:</a>. Call this function from your implementation of application:openURL:sourceApplication:annotation delegate.
</p>
</dd>
</dl>
<hr class="betweenAPIEntries">
<!-- headerDoc=clm;  uid=//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:;   name=AIMobileLib::authorizeUserForScopes:delegate: --><a name="//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:"></a>
<h3><a name="authorizeUserForScopes:delegate:">authorizeUserForScopes:delegate:</a></h3>
<hr class="afterName">
<p><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:;name=start --><!-- begin abstract --></p>
<p>Allows the user to login and, if necessary, authorize the application for the requested scopes.
</p>
<!-- end abstract --><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:;name=end -->
<div class="declaration_indent">
<pre><!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:;name=start -->+ (<!-- a logicalPath="//apple_ref/occ/cl/void //apple_ref/occ/tdef/void //apple_ref/occ/tag/void //apple_ref/occ/struct/void //apple_ref/occ/intf/void //apple_ref/doc/anysymbol/void" machineGenerated="true" --><span class="type">void</span><!-- /a -->) <a machinegenerated="true" href="index.html#//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" logicalPath="//apple_ref/occ/instm/AIMobileLib/authorizeUserForScopes //apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes" target="_top"><span class="function">authorizeUserForScopes</span></a>:(<!-- a logicalPath="//apple_ref/occ/cl/NSArray //apple_ref/occ/tdef/NSArray //apple_ref/occ/tag/NSArray //apple_ref/occ/struct/NSArray //apple_ref/occ/intf/NSArray //apple_ref/doc/anysymbol/NSArray" machineGenerated="true" --><span class="type">NSArray</span><!-- /a --><span class="type">*</span>)<span class="param">scopes</span> <!-- a logicalPath="//apple_ref/occ/instm/AIMobileLib/delegate //apple_ref/occ/clm/AIMobileLib/delegate //apple_ref/occ/intfcm/AIMobileLib/delegate //apple_ref/occ/intfm/AIMobileLib/delegate //apple_ref/occ/func/delegate //apple_ref/occ/ftmplt/AIMobileLib/delegate //apple_ref/occ/defn/delegate //apple_ref/occ/macro/delegate //apple_ref/doc/anysymbol/delegate" machineGenerated="true" --><span class="function">delegate</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/id //apple_ref/occ/tdef/id //apple_ref/occ/tag/id //apple_ref/occ/struct/id //apple_ref/occ/intf/id //apple_ref/doc/anysymbol/id" machineGenerated="true" --><span class="type">id</span><!-- /a -->&lt;<span class="param">AIAuthenticationDelegate</span>&gt;)<!-- a logicalPath="//apple_ref/occ/econst/authenticationDelegate //apple_ref/occ/data/AIMobileLib/authenticationDelegate //apple_ref/occ/data/authenticationDelegate //apple_ref/occ/clconst/AIMobileLib/authenticationDelegate " machineGenerated="true" --><span class="var">authenticationDelegate</span><!-- /a -->; <!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:;name=end --></pre>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<div class="param_indent">
<dl>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/authorizeUserForScopes:delegate:/scopes;   name=authorizeUserForScopes:delegate:::scopes -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/authorizeUserForScopes:delegate:/scopes"></a>
<code>scopes</code>
</dt>
<dd><p>The profile scopes that the application is requesting from the user. The first scope must be "profile".  "postal_code" is an optional second scope.</p></dd>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/authorizeUserForScopes:delegate:/authenticationDelegate;   name=authorizeUserForScopes:delegate:::authenticationDelegate -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/authorizeUserForScopes:delegate:/authenticationDelegate"></a>
<code>authenticationDelegate</code>
</dt>
<dd><p>A delegate implementing the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intf/AIAuthenticationDelegate" logicalPath="//apple_ref/occ/intf/AIAuthenticationDelegate" target="_top">AIAuthenticationDelegate</a> protocol to receive success and failure messages.</p></dd>
</dl>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value --></p>
<p>Pass in a valid instance of <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intf/AIAuthenticationDelegate" logicalPath="//apple_ref/occ/intf/AIAuthenticationDelegate" target="_top">AIAuthenticationDelegate</a> to receive success and failure notifications.
</p>
<p>If authorization succeeds the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intfm/AIAuthenticationDelegate/requestDidSucceed:" logicalPath="//apple_ref/doc/anysymbol/requestDidSucceed:" target="_top">requestDidSucceed:</a> method is called on the delegate.  The application can now call <a href="index.html#//apple_ref/occ/clm/AIMobileLib/getProfile:" logicalPath="//apple_ref/occ/clm/AIMobileLib/getProfile:" target="_top">getProfile:</a> to retrieve the user's profile data, or <a href="index.html#//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:" logicalPath="//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:" target="_top">getAccessTokenForScopes:withOverrideParams:delegate:</a> to retrieve the raw access token.
</p>
<p>If authorization fails the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intfm/AIAuthenticationDelegate/requestDidFail:" logicalPath="//apple_ref/doc/anysymbol/requestDidFail:" target="_top">requestDidFail:</a> method is called on the delegate.  The error code and an error message are passed to the method in an APIError object.  authorizeUserForScopes can produce the following error codes:
</p>
<p>1.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIUnauthorizedClient" logicalPath="//apple_ref/doc/anysymbol/kAIUnauthorizedClient" target="_top">kAIUnauthorizedClient</a> - The application is not authorized to make this call.
</p>
<p>2.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIInternalError" logicalPath="//apple_ref/doc/anysymbol/kAIInternalError" target="_top">kAIInternalError</a> - An internal error occured in the SDK.  You can allow the user to login again.
</p>
<p>3.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIErrorUserInterrupted" logicalPath="//apple_ref/doc/anysymbol/kAIErrorUserInterrupted" target="_top">kAIErrorUserInterrupted</a> - The user canceled the login page.  You can allow the user to login again.
</p>
<p>4.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIInvalidInput" logicalPath="//apple_ref/doc/anysymbol/kAIInvalidInput" target="_top">kAIInvalidInput</a> - One of the API parameters is invalid.  See the error message for more information.
</p>
<p>5.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIDeviceError" logicalPath="//apple_ref/doc/anysymbol/kAIDeviceError" target="_top">kAIDeviceError</a> -  The SDK encountered an error on the device.  Currently, the SDK only throws this error when it receives the same error from the keychain service. Calling <a href="index.html#//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" logicalPath="//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" target="_top">clearAuthorizationState:</a> will help.
</p>
<p>6.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAINetworkError" logicalPath="//apple_ref/doc/anysymbol/kAINetworkError" target="_top">kAINetworkError</a> - A network error occurred, possibly due to the user being offline.
</p>
<p>7.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIServerError" logicalPath="//apple_ref/doc/anysymbol/kAIServerError" target="_top">kAIServerError</a> - The server encountered an error while completing the request, or the SDK received an unknown response from the server.  You can allow the user to login again.
</p>
<p>8.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIAccessDenied" logicalPath="//apple_ref/doc/anysymbol/kAIAccessDenied" target="_top">kAIAccessDenied</a> - The user did not consent to the requested scopes.
</p>

<!-- end return value --><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font></h5>
<!-- begin discussion --><!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:;name=start --><p>Use this method to request authorization from the user for the required scopes.  If the user has not logged in, they will see a login page.  Afterward, if they have not previously approved these scopes for your application, they will see a consent page.
</p>
<p>The sign in page is displayed in the Safari web browser, so there will be a visible switch from the application to the Safari browser. After the user signs in on the browser, they are redirected back to the app. The application must define the application:openURL:sourceApplication:annotation application delegate and call the <a href="index.html#//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:" logicalPath="//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:" target="_top">handleOpenURL:sourceApplication:</a> API from that delegate. This allows the SDK to get the login information from the Safari web browser.
</p>
<p>Scopes that can be used with this API are:
</p>
<ol start="1">
<li>
<p>  "profile": This scope enables an application to request profile information from the backend server. The porfile information includes cusomter's name, email and user_id.
</p>
</li>
<li><p>  "postal_code": This scope enables an application to request the postal code registered to the user's account.
</p></li>
</ol>
<!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:;name=end --><!-- end discussion --><dl>
<dt><b>Availability</b></dt>
<dd>1.0
</dd>
</dl>
<hr class="betweenAPIEntries">
<!-- headerDoc=clm;  uid=//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:;   name=AIMobileLib::clearAuthorizationState: --><a name="//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:"></a>
<h3><a name="clearAuthorizationState:">clearAuthorizationState:</a></h3>
<hr class="afterName">
<p><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:;name=start --><!-- begin abstract --></p>
<p>Deletes cached user tokens and other data.  Use this method to logout a user.
</p>
<!-- end abstract --><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:;name=end -->
<div class="declaration_indent">
<pre><!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:;name=start -->+ (<!-- a logicalPath="//apple_ref/occ/cl/void //apple_ref/occ/tdef/void //apple_ref/occ/tag/void //apple_ref/occ/struct/void //apple_ref/occ/intf/void //apple_ref/doc/anysymbol/void" machineGenerated="true" --><span class="type">void</span><!-- /a -->)<a machinegenerated="true" href="index.html#//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" logicalPath="//apple_ref/occ/instm/AIMobileLib/clearAuthorizationState //apple_ref/occ/clm/AIMobileLib/clearAuthorizationState" target="_top"><span class="function">clearAuthorizationState</span></a>:(<!-- a logicalPath="//apple_ref/occ/cl/id //apple_ref/occ/tdef/id //apple_ref/occ/tag/id //apple_ref/occ/struct/id //apple_ref/occ/intf/id //apple_ref/doc/anysymbol/id" machineGenerated="true" --><span class="type">id</span><!-- /a -->&lt;<span class="param">AIAuthenticationDelegate</span>&gt;)<!-- a logicalPath="//apple_ref/occ/econst/authenticationDelegate //apple_ref/occ/data/AIMobileLib/authenticationDelegate //apple_ref/occ/data/authenticationDelegate //apple_ref/occ/clconst/AIMobileLib/authenticationDelegate " machineGenerated="true" --><span class="var">authenticationDelegate</span><!-- /a -->; <!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:;name=end --></pre>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<div class="param_indent">
<dl>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/clearAuthorizationState:/authenticationDelegate;   name=clearAuthorizationState:::authenticationDelegate -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/clearAuthorizationState:/authenticationDelegate"></a>
<code>authenticationDelegate</code>
</dt>
<dd><p>A delegate implementing the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intf/AIAuthenticationDelegate" logicalPath="//apple_ref/occ/intf/AIAuthenticationDelegate" target="_top">AIAuthenticationDelegate</a> protocol to receive success and failure messages.</p></dd>
</dl>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value --></p>
<p>Pass in a valid instance of <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intf/AIAuthenticationDelegate" logicalPath="//apple_ref/occ/intf/AIAuthenticationDelegate" target="_top">AIAuthenticationDelegate</a> to receive success and failure notifications.
</p>
<p>If clearing succeeds the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intfm/AIAuthenticationDelegate/requestDidSucceed:" logicalPath="//apple_ref/doc/anysymbol/requestDidSucceed:" target="_top">requestDidSucceed:</a> method is called on the delegate.
</p>
<p>If clearing fails the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intfm/AIAuthenticationDelegate/requestDidFail:" logicalPath="//apple_ref/doc/anysymbol/requestDidFail:" target="_top">requestDidFail:</a> method is called on the delegate. The error code and an error message are passed to the method in an APIError object.  clearAuthorizationState can produce the following error codes:
</p>
<p>1.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIInvalidInput" logicalPath="//apple_ref/doc/anysymbol/kAIInvalidInput" target="_top">kAIInvalidInput</a> - One of the API parameters is invalid.  See the error message for more information.
</p>
<p>2.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIDeviceError" logicalPath="//apple_ref/doc/anysymbol/kAIDeviceError" target="_top">kAIDeviceError</a> - The SDK encountered an error on the device.  Currently, the SDK only throws this error when it receives the same error from the keychain service. Calling <a href="index.html#//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" logicalPath="//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" target="_top">clearAuthorizationState:</a> will help.
</p>

<!-- end return value --><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font></h5>
<!-- begin discussion --><!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:;name=start --><p>This method removes the authorization tokens from the key chain. It also clears the cookies from the local cookie storage to clear the authorization state of the users who checked the "Remember me" checkbox.
</p>
<!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:;name=end --><!-- end discussion -->
<dl>
<dt><b>Availability</b></dt>
<dd>1.0
</dd>
</dl>
<hr class="betweenAPIEntries">
<!-- headerDoc=clm;  uid=//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:;   name=AIMobileLib::getAccessTokenForScopes:withOverrideParams:delegate: --><a name="//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:"></a>
<h3><a name="getAccessTokenForScopes:withOverrideParams:delegate:">getAccessTokenForScopes:withOverrideParams:delegate:</a></h3>
<hr class="afterName">
<p><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:;name=start --><!-- begin abstract --></p>
<p>Once the user has logged in, this method will return a valid access token for the requested scopes.
</p>
<!-- end abstract --><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:;name=end -->
<div class="declaration_indent">
<pre><!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:;name=start -->+ (<!-- a logicalPath="//apple_ref/occ/cl/void //apple_ref/occ/tdef/void //apple_ref/occ/tag/void //apple_ref/occ/struct/void //apple_ref/occ/intf/void //apple_ref/doc/anysymbol/void" machineGenerated="true" --><span class="type">void</span><!-- /a -->) <a machinegenerated="true" href="index.html#//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:" logicalPath="//apple_ref/occ/instm/AIMobileLib/getAccessTokenForScopes //apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes" target="_top"><span class="function">getAccessTokenForScopes</span></a>:(<!-- a logicalPath="//apple_ref/occ/cl/NSArray //apple_ref/occ/tdef/NSArray //apple_ref/occ/tag/NSArray //apple_ref/occ/struct/NSArray //apple_ref/occ/intf/NSArray //apple_ref/doc/anysymbol/NSArray" machineGenerated="true" --><span class="type">NSArray</span><!-- /a --><span class="type">*</span>)<span class="param">scopes</span> 
        <!-- a logicalPath="//apple_ref/occ/instm/AIMobileLib/withOverrideParams //apple_ref/occ/clm/AIMobileLib/withOverrideParams //apple_ref/occ/intfcm/AIMobileLib/withOverrideParams //apple_ref/occ/intfm/AIMobileLib/withOverrideParams //apple_ref/occ/func/withOverrideParams //apple_ref/occ/ftmplt/AIMobileLib/withOverrideParams //apple_ref/occ/defn/withOverrideParams //apple_ref/occ/macro/withOverrideParams //apple_ref/doc/anysymbol/withOverrideParams" machineGenerated="true" --><span class="function">withOverrideParams</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/NSDictionary //apple_ref/occ/tdef/NSDictionary //apple_ref/occ/tag/NSDictionary //apple_ref/occ/struct/NSDictionary //apple_ref/occ/intf/NSDictionary //apple_ref/doc/anysymbol/NSDictionary" machineGenerated="true" --><span class="type">NSDictionary</span><!-- /a --><span class="type">*</span>)<span class="param">overrideParams</span> <!-- a logicalPath="//apple_ref/occ/instm/AIMobileLib/delegate //apple_ref/occ/clm/AIMobileLib/delegate //apple_ref/occ/intfcm/AIMobileLib/delegate //apple_ref/occ/intfm/AIMobileLib/delegate //apple_ref/occ/func/delegate //apple_ref/occ/ftmplt/AIMobileLib/delegate //apple_ref/occ/defn/delegate //apple_ref/occ/macro/delegate //apple_ref/doc/anysymbol/delegate" machineGenerated="true" --><span class="function">delegate</span><!-- /a -->:(<!-- a logicalPath="//apple_ref/occ/cl/id //apple_ref/occ/tdef/id //apple_ref/occ/tag/id //apple_ref/occ/struct/id //apple_ref/occ/intf/id //apple_ref/doc/anysymbol/id" machineGenerated="true" --><span class="type">id</span><!-- /a -->&lt;<span class="param">AIAuthenticationDelegate</span>&gt;)<!-- a logicalPath="//apple_ref/occ/econst/authenticationDelegate //apple_ref/occ/data/AIMobileLib/authenticationDelegate //apple_ref/occ/data/authenticationDelegate //apple_ref/occ/clconst/AIMobileLib/authenticationDelegate " machineGenerated="true" --><span class="var">authenticationDelegate</span><!-- /a -->; <!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:;name=end --></pre>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<div class="param_indent">
<dl>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:/scopes;   name=getAccessTokenForScopes:withOverrideParams:delegate:::scopes -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:/scopes"></a>
<code>scopes</code>
</dt>
<dd><p>The profile scopes required for the token. The first scope must be "profile".  "postal_code" is an optional second scope.</p></dd>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:/authenticationDelegate;   name=getAccessTokenForScopes:withOverrideParams:delegate:::authenticationDelegate -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:/authenticationDelegate"></a>
<code>authenticationDelegate</code>
</dt>
<dd><p>A delegate implementing the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intf/AIAuthenticationDelegate" logicalPath="//apple_ref/occ/intf/AIAuthenticationDelegate" target="_top">AIAuthenticationDelegate</a> protocol to receive success and failure messages.</p></dd>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:/overrideParams;   name=getAccessTokenForScopes:withOverrideParams:delegate:::overrideParams -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:/overrideParams"></a>
<code>overrideParams</code>
</dt>
<dd>
<p>Any additional override parameters, as key:value pairs. The SDK currently supports the following override flags:
</p>
<p>kForceRefresh - Forces the SDK to refesh the cached access token. See <a href="index.html#//apple_ref/occ/clconst/AIMobileLib/kForceRefresh" logicalPath="//apple_ref/occ/clconst/AIMobileLib/kForceRefresh" target="_top">kForceRefresh</a> for more information.</p>
</dd>
</dl>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value --></p>
<p>Pass in a valid instance of <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intf/AIAuthenticationDelegate" logicalPath="//apple_ref/occ/intf/AIAuthenticationDelegate" target="_top">AIAuthenticationDelegate</a> to receive success and failure notifications.
</p>
<p>If authorization succeeds the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intfm/AIAuthenticationDelegate/requestDidSucceed:" logicalPath="//apple_ref/doc/anysymbol/requestDidSucceed:" target="_top">requestDidSucceed:</a> method is called on the delegate.  The new access token is passed in the result property of the APIResult parameter.  The application can then use the access token directly with services that support it.
</p>
<p>If authorization fails the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intfm/AIAuthenticationDelegate/requestDidFail:" logicalPath="//apple_ref/doc/anysymbol/requestDidFail:" target="_top">requestDidFail:</a> method is called on the delegate. The error code and an error message are passed to the method in an APIError object.  getAccessTokenForScopes can produce the following error codes:
</p>
<p>1.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIApplicationNotAuthorized" logicalPath="//apple_ref/doc/anysymbol/kAIApplicationNotAuthorized" target="_top">kAIApplicationNotAuthorized</a> - The application is not authorized for scopes requested. Call authorizeUserForScopes to allow the user to authorize the application.
</p>
<p>2.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIUnauthorizedClient" logicalPath="//apple_ref/doc/anysymbol/kAIUnauthorizedClient" target="_top">kAIUnauthorizedClient</a> - The application is not authorized to make this call.
</p>
<p>3.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIInternalError" logicalPath="//apple_ref/doc/anysymbol/kAIInternalError" target="_top">kAIInternalError</a> - An internal error occured in the SDK.  You can retry the method call.
</p>
<p>4.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIInvalidInput" logicalPath="//apple_ref/doc/anysymbol/kAIInvalidInput" target="_top">kAIInvalidInput</a> - One of the API parameters is invalid.  See the error message for more information.
</p>
<p>5.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIDeviceError" logicalPath="//apple_ref/doc/anysymbol/kAIDeviceError" target="_top">kAIDeviceError</a> - The SDK encountered an error on the device.  Currently, the SDK only throws this error when it receives the same error from the keychain service. Calling <a href="index.html#//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" logicalPath="//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" target="_top">clearAuthorizationState:</a> will help.
</p>
<p>6.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAINetworkError" logicalPath="//apple_ref/doc/anysymbol/kAINetworkError" target="_top">kAINetworkError</a> - A network error occurred, possibly due to the user being offline.
</p>
<p>7.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIServerError" logicalPath="//apple_ref/doc/anysymbol/kAIServerError" target="_top">kAIServerError</a> - The server encountered an error while completing the request, or the SDK received an unknown response from the server.  You can retry the method call.
</p>

<!-- end return value --><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font></h5>
<!-- begin discussion --><!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:;name=start --><p>This method returns a valid access token, if necessary by exchanging the current refresh token for a new access token.  If the method is successful, this access token is valid for the requested scopes.
</p>
<p>If the API is called with the <a href="index.html#//apple_ref/occ/clconst/AIMobileLib/kForceRefresh" logicalPath="//apple_ref/occ/clconst/AIMobileLib/kForceRefresh" target="_top">kForceRefresh</a> override property set to "YES", the SDK discards the existing access token and requests a new access token.
</p>
<!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:;name=end --><!-- end discussion -->
<dl>
<dt><b>Availability</b></dt>
<dd>1.0
</dd>
</dl>
<hr class="betweenAPIEntries">
<!-- headerDoc=clm;  uid=//apple_ref/occ/clm/AIMobileLib/getProfile:;   name=AIMobileLib::getProfile: --><a name="//apple_ref/occ/clm/AIMobileLib/getProfile:"></a>
<h3><a name="getProfile:">getProfile:</a></h3>
<hr class="afterName">
<p><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/getProfile:;name=start --><!-- begin abstract --></p>
<p>Use this method to get the profile of the current authorized user.
<!-- end abstract --><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/getProfile:;name=end --></p>
<div class="declaration_indent">
<pre><!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/getProfile:;name=start -->+ (<!-- a logicalPath="//apple_ref/occ/cl/void //apple_ref/occ/tdef/void //apple_ref/occ/tag/void //apple_ref/occ/struct/void //apple_ref/occ/intf/void //apple_ref/doc/anysymbol/void" machineGenerated="true" --><span class="type">void</span><!-- /a -->) <a machinegenerated="true" href="index.html#//apple_ref/occ/clm/AIMobileLib/getProfile:" logicalPath="//apple_ref/occ/instm/AIMobileLib/getProfile //apple_ref/occ/clm/AIMobileLib/getProfile" target="_top"><span class="function">getProfile</span></a>:(<!-- a logicalPath="//apple_ref/occ/cl/id //apple_ref/occ/tdef/id //apple_ref/occ/tag/id //apple_ref/occ/struct/id //apple_ref/occ/intf/id //apple_ref/doc/anysymbol/id" machineGenerated="true" --><span class="type">id</span><!-- /a -->&lt;<span class="param">AIAuthenticationDelegate</span>&gt;)<!-- a logicalPath="//apple_ref/occ/econst/authenticationDelegate //apple_ref/occ/data/AIMobileLib/authenticationDelegate //apple_ref/occ/data/authenticationDelegate //apple_ref/occ/clconst/AIMobileLib/authenticationDelegate " machineGenerated="true" --><span class="var">authenticationDelegate</span><!-- /a -->; <!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/getProfile:;name=end --></pre>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<div class="param_indent">
<dl>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/getProfile:/authenticationDelegate;   name=getProfile:::authenticationDelegate -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/getProfile:/authenticationDelegate"></a>
<code>authenticationDelegate</code>
</dt>
<dd><p>A delegate implementing the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intf/AIAuthenticationDelegate" logicalPath="//apple_ref/occ/intf/AIAuthenticationDelegate" target="_top">AIAuthenticationDelegate</a> protocol to receive success and failure messages.</p></dd>
</dl>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value --></p>
<p>Pass in a valid instance of <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intf/AIAuthenticationDelegate" logicalPath="//apple_ref/occ/intf/AIAuthenticationDelegate" target="_top">AIAuthenticationDelegate</a> to receive success and failure notifications.
</p>
<p>If the profile is retrieved successfully the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intfm/AIAuthenticationDelegate/requestDidSucceed:" logicalPath="//apple_ref/doc/anysymbol/requestDidSucceed:" target="_top">requestDidSucceed:</a> method is called on the delegate. The user profile is passed in the result property of the APIResult parameter as a dictionary.  That dictionary includes key:value pairs with the following keys:
</p>
<p>1.  "name" - The name of the user.
</p>
<p>2.  "email" - The registered email address of the user.
</p>
<p>3.  "user_id" - The used id of the user, in the form of "amzn1.user.VALUE".  The user id is unique to the user.
</p>
<p>4.  "postal_code" - The registered postal code of the user.
</p>
<p>If authorization fails the <a href="../../../AIAuthenticationDelegate_h/Protocols/AIAuthenticationDelegate/index.html#//apple_ref/occ/intfm/AIAuthenticationDelegate/requestDidFail:" logicalPath="//apple_ref/doc/anysymbol/requestDidFail:" target="_top">requestDidFail:</a> method is called on the delegate. The error code and an error message are passed to the method in an APIError object.  getAccessTokenForScopes can produce the following error codes:
</p>
<p>1.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIApplicationNotAuthorized" logicalPath="//apple_ref/doc/anysymbol/kAIApplicationNotAuthorized" target="_top">kAIApplicationNotAuthorized</a> - The application is not authorized for the "profile" scope. Call <a href="index.html#//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" logicalPath="//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" target="_top">authorizeUserForScopes:delegate:</a> to prompt the user to login and authorize the application.
</p>
<p>2.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIInternalError" logicalPath="//apple_ref/doc/anysymbol/kAIInternalError" target="_top">kAIInternalError</a> - An internal error occured in the SDK.  You can retry the method call.
</p>
<p>3.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIInvalidInput" logicalPath="//apple_ref/doc/anysymbol/kAIInvalidInput" target="_top">kAIInvalidInput</a> - One of the API parameters is invalid.  See the error message for more information.
</p>
<p>4.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIDeviceError" logicalPath="//apple_ref/doc/anysymbol/kAIDeviceError" target="_top">kAIDeviceError</a> - The SDK encountered an error on the device.  Currently, the SDK only throws this error when it receives the same error from the keychain service. Calling <a href="index.html#//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" logicalPath="//apple_ref/occ/clm/AIMobileLib/clearAuthorizationState:" target="_top">clearAuthorizationState:</a> will help.
</p>
<p>5.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAINetworkError" logicalPath="//apple_ref/doc/anysymbol/kAINetworkError" target="_top">kAINetworkError</a> - A network error occurred, possibly due to the user being offline.
</p>
<p>6.  <a href="../../../AIError_h/Classes/AIError/index.html#//apple_ref/occ/clconst/AIError/kAIServerError" logicalPath="//apple_ref/doc/anysymbol/kAIServerError" target="_top">kAIServerError</a> - The server encountered an error while completing the request, or the SDK received an unknown response from the server.  You can retry the method call.
</p>

<!-- end return value --><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font></h5>
<!-- begin discussion --><!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/getProfile:;name=start --><p>This method gets profile information for the current authorized user. The application should make sure it is authorized for the "profile" scope prior to calling this method.  If the application is authorized for the "postal_code" scope, getProfile will return that information as well.  This profile information is cached for 60 minutes.
<!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/getProfile:;name=end --><!-- end discussion -->
</p>
<dl>
<dt><b>Availability</b></dt>
<dd>1.0
</dd>
</dl>
<hr class="betweenAPIEntries">
<!-- headerDoc=clm;  uid=//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:;   name=AIMobileLib::handleOpenURL:sourceApplication: --><a name="//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:"></a>
<h3><a name="handleOpenURL:sourceApplication:">handleOpenURL:sourceApplication:</a></h3>
<hr class="afterName">
<p><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:;name=start --><!-- begin abstract --></p>
<p>Helper function for <a href="index.html#//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" logicalPath="//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" target="_top">authorizeUserForScopes:delegate:</a>. Call this function from your implementation of application:openURL:sourceApplication:annotation delegate.
</p>
<!-- end abstract --><!-- headerDoc=abstract;uid=//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:;name=end -->
<div class="declaration_indent">
<pre><!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:;name=start -->+ (<!-- a logicalPath="//apple_ref/occ/cl/BOOL //apple_ref/occ/tdef/BOOL //apple_ref/occ/tag/BOOL //apple_ref/occ/struct/BOOL //apple_ref/occ/intf/BOOL //apple_ref/doc/anysymbol/BOOL" machineGenerated="true" --><span class="type">BOOL</span><!-- /a -->) <a machinegenerated="true" href="index.html#//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:" logicalPath="//apple_ref/occ/instm/AIMobileLib/handleOpenURL //apple_ref/occ/clm/AIMobileLib/handleOpenURL" target="_top"><span class="function">handleOpenURL</span></a>:(<!-- a logicalPath="//apple_ref/occ/cl/NSURL //apple_ref/occ/tdef/NSURL //apple_ref/occ/tag/NSURL //apple_ref/occ/struct/NSURL //apple_ref/occ/intf/NSURL //apple_ref/doc/anysymbol/NSURL" machineGenerated="true" --><span class="type">NSURL</span><!-- /a --><span class="type">*</span>)<span class="param">url</span> <a machinegenerated="true" href="index.html#//apple_ref/doc/methodparam/AIMobileLib/handleOpenURL:sourceApplication:/sourceApplication" logicalPath="//apple_ref/occ/instm/AIMobileLib/sourceApplication //apple_ref/occ/clm/AIMobileLib/sourceApplication //apple_ref/occ/intfcm/AIMobileLib/sourceApplication //apple_ref/occ/intfm/AIMobileLib/sourceApplication //apple_ref/occ/func/sourceApplication //apple_ref/occ/ftmplt/AIMobileLib/sourceApplication //apple_ref/occ/defn/sourceApplication //apple_ref/occ/macro/sourceApplication //apple_ref/doc/anysymbol/sourceApplication" target="_top"><span class="function">sourceApplication</span></a>:(<!-- a logicalPath="//apple_ref/occ/cl/NSString //apple_ref/occ/tdef/NSString //apple_ref/occ/tag/NSString //apple_ref/occ/struct/NSString //apple_ref/occ/intf/NSString //apple_ref/doc/anysymbol/NSString" machineGenerated="true" --><span class="type">NSString</span><!-- /a --><span class="type">*</span>)<!-- a logicalPath="//apple_ref/occ/econst/sourceApplication //apple_ref/occ/data/AIMobileLib/sourceApplication //apple_ref/occ/data/sourceApplication //apple_ref/occ/clconst/AIMobileLib/sourceApplication " machineGenerated="true" --><span class="var">sourceApplication</span><!-- /a -->; <!-- headerDoc=declaration;uid=//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:;name=end --></pre>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<div class="param_indent">
<dl>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/handleOpenURL:sourceApplication:/url;   name=handleOpenURL:sourceApplication:::url -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/handleOpenURL:sourceApplication:/url"></a>
<code>url</code>
</dt>
<dd><p>The url received on the application:openURL:sourceApplication:annotation application delegate.</p></dd>
<dt>
<!-- headerDoc=methodparam;  uid=//apple_ref/doc/methodparam/AIMobileLib/handleOpenURL:sourceApplication:/sourceApplication;   name=handleOpenURL:sourceApplication:::sourceApplication -->
<a name="//apple_ref/doc/methodparam/AIMobileLib/handleOpenURL:sourceApplication:/sourceApplication"></a>
<code>sourceApplication</code>
</dt>
<dd><p>The sourceApplication received on the application:openURL:sourceApplication:annotation application delegate.</p></dd>
</dl>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value --></p>
<p>Returns YES if the url passed in was a valid url from SDK's reference and NO if the url was not valid.
</p>

<!-- end return value --><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font></h5>
<!-- begin discussion --><!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:;name=start --><p>This method handles the application:openURL:sourceApplication:annotation call from the Safari web browser. The application should be calling this function when it receives a call to application:openURL:sourceApplication:annotation, passing in the url and the sourceApplication. If application fails to do so, the SDK will not be able to complete the login flow. 
</p>
<p>The SDK validates the url parameter to check if the url is valid for the SDK. It is possible the application may want to handle the url as well, in which case the application should first call the SDK to see if this url is a callback from safari and if the SDK wants to process it. After processing, the SDK will return its preference and the application can then process the url if it chooses. Any error arising from this API is reported through the failure delegate used for the authorizeUserForScopes:delegate: call.
</p>
<p>See <a href="index.html#//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" logicalPath="//apple_ref/occ/clm/AIMobileLib/authorizeUserForScopes:delegate:" target="_top">authorizeUserForScopes:delegate:</a> for more discussion on how to work with this API to complement the login work flow.
</p>
<!-- headerDoc=discussion;uid=//apple_ref/occ/clm/AIMobileLib/handleOpenURL:sourceApplication:;name=end --><!-- end discussion -->
<dl>
<dt><b>Availability</b></dt>
<dd>1.0
</dd>
</dl>
<hr class="betweenSections">
<a name="HeaderDoc_constants"></a>
<h2 class="h2tight">Constants</h2>
<dl>
<dt><tt><a href="index.html#//apple_ref/occ/clconst/AIMobileLib/kForceRefresh" target="_top">kForceRefresh</a></tt></dt>
<dd><p>Key name for defining whether to force a refresh of the access token.
</p></dd>
</dl>
<hr class="betweenAPIEntries">
<!-- headerDoc=clconst;  uid=//apple_ref/occ/clconst/AIMobileLib/kForceRefresh;   name=AIMobileLib::kForceRefresh --><a name="//apple_ref/occ/clconst/AIMobileLib/kForceRefresh"></a>
<h3><a name="kForceRefresh">kForceRefresh</a></h3>
<hr class="afterName">
<p><!-- headerDoc=abstract;uid=//apple_ref/occ/clconst/AIMobileLib/kForceRefresh;name=start --><!-- begin abstract --></p>
<p>Key name for defining whether to force a refresh of the access token.
<!-- end abstract --><!-- headerDoc=abstract;uid=//apple_ref/occ/clconst/AIMobileLib/kForceRefresh;name=end --></p>
<div class="declaration_indent">
<pre><!-- headerDoc=declaration;uid=//apple_ref/occ/clconst/AIMobileLib/kForceRefresh;name=start --><span class="keyword">extern</span> <span class="keyword">const</span> <!-- a logicalPath="//apple_ref/occ/cl/NSString //apple_ref/occ/tdef/NSString //apple_ref/occ/tag/NSString //apple_ref/occ/struct/NSString //apple_ref/occ/intf/NSString //apple_ref/doc/anysymbol/NSString" machineGenerated="true" --><span class="type">NSString</span><!-- /a --><span class="type">*</span> <a machinegenerated="true" href="index.html#//apple_ref/occ/clconst/AIMobileLib/kForceRefresh" logicalPath="//apple_ref/occ/econst/kForceRefresh //apple_ref/occ/data/AIMobileLib/kForceRefresh //apple_ref/occ/data/kForceRefresh //apple_ref/occ/clconst/AIMobileLib/kForceRefresh" target="_top"><span class="var">kForceRefresh</span></a>; <!-- headerDoc=declaration;uid=//apple_ref/occ/clconst/AIMobileLib/kForceRefresh;name=end --></pre>
</div>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font></h5>
<!-- begin discussion --><!-- headerDoc=discussion;uid=//apple_ref/occ/clconst/AIMobileLib/kForceRefresh;name=start --><p>Pass this key with a string value of "YES" to <a href="index.html#//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:" logicalPath="//apple_ref/occ/clm/AIMobileLib/getAccessTokenForScopes:withOverrideParams:delegate:" target="_top">getAccessTokenForScopes:withOverrideParams:delegate:</a> to force the method to refresh the access token.
</p>
<!-- headerDoc=discussion;uid=//apple_ref/occ/clconst/AIMobileLib/kForceRefresh;name=end --><!-- end discussion -->
<dl>
<dt><b>Availability</b></dt>
<dd>1.0
</dd>
</dl>
<p class="gapBeforeFooter">&nbsp;</p>
<hr class="afterFooter">
<div class="hd_copyright_and_timestamp">
<p class="hd_timestamp">Last Updated: Monday, May 27, 2013
</p>
</div>
</td>
</tr></table>
</body>
</html>
